<div class="sidebar">
    <div class="sidebar-content">
      <mat-nav-list class="nav-list">
        <div *ngFor="let item of getFilteredMenuItems()">
          
          <!-- Élément simple (sans enfants) -->
          <a mat-list-item 
             *ngIf="!item.children && item.route"
             [routerLink]="item.route"
             routerLinkActive="active"
             [class.active]="isActive(item)"
             class="nav-item">
            <mat-icon matListItemIcon>{{ item.icon }}</mat-icon>
            <span matListItemTitle>{{ item.label }}</span>
            <span *ngIf="item.badge && item.badge > 0" 
                  class="nav-badge"
                  matListItemMeta>{{ item.badge }}</span>
          </a>
  
          <!-- Élément avec enfants (expansion panel) -->
          <mat-expansion-panel 
            *ngIf="item.children && hasVisibleChildren(item)"
            class="nav-expansion"
            [expanded]="isActive(item)">
            
            <mat-expansion-panel-header class="nav-expansion-header">
              <mat-panel-title class="nav-expansion-title">
                <mat-icon class="nav-expansion-icon">{{ item.icon }}</mat-icon>
                <span class="nav-expansion-label">{{ item.label }}</span>
              </mat-panel-title>
            </mat-expansion-panel-header>
  
            <div class="nav-expansion-content">
              <a mat-list-item
                 *ngFor="let child of getFilteredChildren(item)"
                 [routerLink]="child.route"
                 routerLinkActive="active"
                 [class.active]="isActive(child)"
                 class="nav-child-item">
                <mat-icon matListItemIcon class="child-icon">{{ child.icon }}</mat-icon>
                <span matListItemTitle>{{ child.label }}</span>
                <span *ngIf="child.badge && child.badge > 0" 
                      class="nav-badge"
                      matListItemMeta>{{ child.badge }}</span>
              </a>
            </div>
          </mat-expansion-panel>
  
          <mat-divider *ngIf="item.id === 'dashboard' || item.id === 'fiscal'"></mat-divider>
        </div>
      </mat-nav-list>
    </div>
  
    <!-- Footer du sidebar -->
    <div class="sidebar-footer">
      <div class="app-version">
        <mat-icon>info</mat-icon>
        <span>Version 1.0.0</span>
      </div>
    </div>
  </div>