<div class="conteneur-connexion">
  <div class="carte-connexion-wrapper">
    <div class="carte-connexion">
      <!-- En-tête avec logo et branding -->
      <div class="en-tete-connexion">
        <div class="conteneur-logo">
          <mat-icon class="icone-geo">map</mat-icon>
        </div>
        <h1 class="titre-application">Géoportail TNB</h1>
        <p class="sous-titre-application">Commune d'Oujda</p>
      </div>

      <!-- Contenu principal du formulaire -->
      <div class="contenu-connexion">
        <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="formulaire-connexion" novalidate>
          
          <!-- Champ nom d'utilisateur -->
          <div class="groupe-champ">
            <label class="etiquette-champ">Nom d'utilisateur</label>
            <input 
              type="text"
              formControlName="username" 
              class="champ-saisie"
              autocomplete="username"
              placeholder="Saisissez votre nom d'utilisateur">
            <div class="message-erreur" *ngIf="isFieldInvalid('username')">
              <span *ngIf="username?.hasError('required')">Le nom d'utilisateur est requis</span>
              <span *ngIf="username?.hasError('minlength')">Minimum 3 caractères requis</span>
            </div>
          </div>

          <!-- Champ mot de passe -->
          <div class="groupe-champ">
            <label class="etiquette-champ">Mot de passe</label>
            <div class="conteneur-mot-de-passe">
              <input 
                [type]="hidePassword ? 'password' : 'text'"
                formControlName="password"
                class="champ-saisie"
                autocomplete="current-password"
                placeholder="Saisissez votre mot de passe">
              <button 
                type="button"
                class="bouton-visibilite" 
                (click)="togglePasswordVisibility()">
                {{ hidePassword ? '👁️' : '🔒' }}
              </button>
            </div>
            <div class="message-erreur" *ngIf="isFieldInvalid('password')">
              <span *ngIf="password?.hasError('required')">Le mot de passe est requis</span>
              <span *ngIf="password?.hasError('minlength')">Minimum 6 caractères requis</span>
            </div>
          </div>

          <!-- Bouton de connexion principal -->
          <button 
            type="submit"
            class="bouton-connexion"
            [disabled]="loginForm.invalid || isLoading">
            <span class="indicateur-chargement" *ngIf="isLoading"></span>
            <span class="texte-bouton">
              {{ isLoading ? 'Connexion en cours...' : 'Se connecter' }}
            </span>
          </button>
        </form>

        <!-- Actions secondaires avec liens -->
        <div class="actions-secondaires">
          <a routerLink="/auth/forgot-password" class="lien-mot-de-passe-oublie">
            <mat-icon class="icone-lien">lock_reset</mat-icon>
            Mot de passe oublié ?
          </a>
          
          <div class="separateur-ou">
            <span>ou</span>
          </div>
          
          <a routerLink="/auth/register" class="lien-register">
            <mat-icon class="icone-lien">person_add</mat-icon>
            Créer un nouveau compte
          </a>
        </div>
      </div>

      <!-- Informations système en bas -->
      <div class="informations-systeme">
        <p class="texte-info">Système de Gestion de la Taxe sur les Terrains Non Bâtis</p>
        <p class="numero-version">Version 1.0.0</p>
      </div>
    </div>
  </div>
</div>