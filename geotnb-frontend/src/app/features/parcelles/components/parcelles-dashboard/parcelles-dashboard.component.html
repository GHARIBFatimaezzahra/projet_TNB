<!-- Header bleu foncé exactement comme dans l'image -->
<div class="dashboard-header">
    <div class="header-content">
        <div class="header-left">
            <i class="fas fa-map-marked-alt"></i>
            <h1>GeoTNB - Gestion des Parcelles</h1>
        </div>
        <div class="header-right">
            <button class="btn btn-secondary" (click)="showAllInterfaces()">
                <i class="fas fa-th-large"></i>
                Voir toutes les interfaces
            </button>
        </div>
    </div>
</div>

<div class="dashboard-container">
    <!-- Titre principal et badge exactement comme dans l'image -->
    <div class="dashboard-title-section">
        <h2 class="main-title">Interfaces de gestion des parcelles</h2>
        <span class="interfaces-badge">7 interfaces disponibles</span>
    </div>
    
    <!-- Grille 3 colonnes exactement comme dans l'image -->
    <div class="interfaces-grid">
        <!-- 1. Carte Interactive -->
        <div class="interface-card" (click)="navigateToInterface('carte-interactive')">
            <div class="card-icon">
                <i class="fas fa-globe"></i>
            </div>
            <h3>Carte Interactive</h3>
            <p>Visualisation cartographique avec outils SIG avancés</p>
        </div>

        <!-- 2. Recherche Avancée -->
        <div class="interface-card" (click)="navigateToInterface('recherche-avancee')">
            <div class="card-icon">
                <i class="fas fa-search"></i>
            </div>
            <h3>Recherche Avancée</h3>
            <p>Requêtes multicritères et requêtes spatiales</p>
        </div>

        <!-- 3. Liste des Parcelles -->
        <div class="interface-card" (click)="navigateToInterface('liste-parcelles')">
            <div class="card-icon">
                <i class="fas fa-list"></i>
            </div>
            <h3>Liste des Parcelles</h3>
            <p>Tableau avec filtres et actions en lot</p>
        </div>

        <!-- 4. Création/Édition -->
        <div class="interface-card" (click)="navigateToInterface('creation-parcelle')">
            <div class="card-icon">
                <i class="fas fa-plus-circle"></i>
            </div>
            <h3>Création/Édition</h3>
            <p>Formulaire multi-étapes avec workflow</p>
        </div>

        <!-- 5. Détail Parcelle -->
        <div class="interface-card" (click)="navigateToInterface('detail-parcelle')">
            <div class="card-icon">
                <i class="fas fa-eye"></i>
            </div>
            <h3>Détail Parcelle</h3>
            <p>Vue complète avec historique et documents</p>
        </div>

        <!-- 6. Gestion Indivision -->
        <div class="interface-card" (click)="navigateToInterface('gestion-indivision')">
            <div class="card-icon">
                <i class="fas fa-users"></i>
            </div>
            <h3>Gestion Indivision</h3>
            <p>Propriétaires et quote-parts</p>
        </div>

        <!-- 7. Import/Export -->
        <div class="interface-card" (click)="navigateToInterface('import-export')">
            <div class="card-icon">
                <i class="fas fa-exchange-alt"></i>
            </div>
            <h3>Import/Export</h3>
            <p>Données SIG et fichiers attributaires</p>
        </div>
    </div>

    <!-- Section Cartes Thématiques -->
    <div class="thematic-maps-section">
        <div class="section-header">
            <h2 class="section-title">Cartes Thématiques</h2>
            <p class="section-subtitle">Visualisation des données par statut foncier et zonage urbanistique</p>
        </div>

        <!-- Contrôles des cartes thématiques -->
        <div class="map-controls">
            <div class="theme-selector">
                <button 
                    class="theme-btn" 
                    [class.active]="selectedTheme === 'status'"
                    (click)="switchTheme('status')">
                    <i class="fas fa-certificate"></i>
                    Statut Foncier
                </button>
                <button 
                    class="theme-btn" 
                    [class.active]="selectedTheme === 'zoning'"
                    (click)="switchTheme('zoning')">
                    <i class="fas fa-city"></i>
                    Zonage Urbanistique
                </button>
            </div>
            
            <div class="map-legend" *ngIf="selectedTheme">
                <h4>Légende</h4>
                <div class="legend-items" [ngSwitch]="selectedTheme">
                    <!-- Légende Statut Foncier -->
                    <div *ngSwitchCase="'status'" class="legend-status">
                        <div class="legend-item">
                            <span class="legend-color status-tf"></span>
                            <span class="legend-label">Titre Foncier (TF)</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color status-r"></span>
                            <span class="legend-label">Réquisition (R)</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color status-ni"></span>
                            <span class="legend-label">Non Immatriculé (NI)</span>
                        </div>
                    </div>
                    
                    <!-- Légende Zonage Urbanistique -->
                    <div *ngSwitchCase="'zoning'" class="legend-zoning">
                        <div class="legend-item">
                            <span class="legend-color zone-r2"></span>
                            <span class="legend-label">Zone R+2</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color zone-r4"></span>
                            <span class="legend-label">Zone R+4</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color zone-villas"></span>
                            <span class="legend-label">Zone Villas</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color zone-industriel"></span>
                            <span class="legend-label">Zone Industrielle</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Carte Thématique -->
        <div class="thematic-map-container">
            <app-map
                mapId="thematic-map"
                [options]="thematicMapOptions"
                [parcelles]="filteredParcelles"
                [showControls]="true"
                [showLayers]="true"
                [enableSelection]="true"
                [enableDrawing]="false"
                (parcelleSelected)="onParcelleSelected($event)"
                (mapReady)="onThematicMapReady($event)">
            </app-map>
        </div>

        <!-- Statistiques de la carte thématique -->
        <div class="map-stats" *ngIf="thematicStats">
            <div class="stats-grid">
                <div class="stat-card" *ngFor="let stat of thematicStats">
                    <div class="stat-value">{{ stat.count }}</div>
                    <div class="stat-label">{{ stat.label }}</div>
                    <div class="stat-percentage">{{ stat.percentage }}%</div>
                </div>
            </div>
        </div>
    </div>
</div>
